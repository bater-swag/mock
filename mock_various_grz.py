import flask
import json
import logging

logging.basicConfig(format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
                    level=logging.INFO)
logger = logging.getLogger(__name__)

app = flask.Flask(__name__)


def to_json(data):
    return json.dumps(data) + "\n"


def resp(code, data):
    return flask.Response(
        status=code,
        mimetype="application/json",
        response=to_json(data)
    )


@app.route('/get_car_numbers/for/sova', methods=['POST', 'GET'])
def post_theme():
    data = to_json(flask.request.json)

    logger.info(data)
    # logging.info(flask.request.json)
    return resp(200, [
        {
            "grz_type": "standard",
            "number": "O854CT31",
            "reliability": "99%",
            "score": 0.9972,
            "warp_matrix": [
                [
                    1.297325319049919,
                    -0.09378255318433158,
                    -89.74990339740523
                ],
                [
                    0.10294862934979847,
                    1.6658960022058311,
                    -72.38224539921289
                ],
                [
                    -4.146455513263177e-06,
                    -3.336403186893497e-05,
                    1.0
                ]
            ],
            "x1": 673,
            "x2": 767,
            "x3": 769,
            "x4": 674,
            "y1": 776,
            "y2": 770,
            "y3": 790,
            "y4": 795
        },
        {
            "grz_type": "taxi",
            "number": "AA25422",
            "reliability": "99%",
            "score": 0.9972,
            "warp_matrix": [
                [
                    1.297325319049919,
                    -0.09378255318433158,
                    -89.74990339740523
                ],
                [
                    0.10294862934979847,
                    1.6658960022058311,
                    -72.38224539921289
                ],
                [
                    -4.146455513263177e-06,
                    -3.336403186893497e-05,
                    1.0
                ]
            ],
            "x1": 673,
            "x2": 767,
            "x3": 769,
            "x4": 674,
            "y1": 776,
            "y2": 770,
            "y3": 790,
            "y4": 795
        },
        {
            "grz_type": "trailer",
            "number": "AA5235110",
            "reliability": "99%",
            "score": 0.9972,
            "warp_matrix": [
                [
                    1.297325319049919,
                    -0.09378255318433158,
                    -89.74990339740523
                ],
                [
                    0.10294862934979847,
                    1.6658960022058311,
                    -72.38224539921289
                ],
                [
                    -4.146455513263177e-06,
                    -3.336403186893497e-05,
                    1.0
                ]
            ],
            "x1": 673,
            "x2": 767,
            "x3": 769,
            "x4": 674,
            "y1": 776,
            "y2": 770,
            "y3": 790,
            "y4": 795
        },
        {
            "grz_type": "standard",
            "number": "AA5876CA",
            "reliability": "99%",
            "score": 0.9972,
            "warp_matrix": [
                [
                    1.297325319049919,
                    -0.09378255318433158,
                    -89.74990339740523
                ],
                [
                    0.10294862934979847,
                    1.6658960022058311,
                    -72.38224539921289
                ],
                [
                    -4.146455513263177e-06,
                    -3.336403186893497e-05,
                    1.0
                ]
            ],
            "x1": 673,
            "x2": 767,
            "x3": 769,
            "x4": 674,
            "y1": 776,
            "y2": 770,
            "y3": 790,
            "y4": 795
        },
        {
            "grz_type": "standard",
            "number": "5984AA-5",
            "reliability": "99%",
            "score": 0.9972,
            "warp_matrix": [
                [
                    1.297325319049919,
                    -0.09378255318433158,
                    -89.74990339740523
                ],
                [
                    0.10294862934979847,
                    1.6658960022058311,
                    -72.38224539921289
                ],
                [
                    -4.146455513263177e-06,
                    -3.336403186893497e-05,
                    1.0
                ]
            ],
            "x1": 673,
            "x2": 767,
            "x3": 769,
            "x4": 674,
            "y1": 776,
            "y2": 770,
            "y3": 790,
            "y4": 795
        },
        {
            "grz_type": "standard",
            "number": "A777AAA",
            "reliability": "99%",
            "score": 0.9972,
            "warp_matrix": [
                [
                    1.297325319049919,
                    -0.09378255318433158,
                    -89.74990339740523
                ],
                [
                    0.10294862934979847,
                    1.6658960022058311,
                    -72.38224539921289
                ],
                [
                    -4.146455513263177e-06,
                    -3.336403186893497e-05,
                    1.0
                ]
            ],
            "x1": 673,
            "x2": 767,
            "x3": 769,
            "x4": 674,
            "y1": 776,
            "y2": 770,
            "y3": 790,
            "y4": 795
        },
        {
            "grz_type": "standard",
            "number": "AHA265",
            "reliability": "96%",
            "score": 0.9653,
            "warp_matrix": [
                [
                    1.5344453485218332,
                    -0.08407919717927834,
                    -203.36655817737997
                ],
                [
                    0.11981285598047191,
                    1.9043938161106588,
                    -101.87245728234336
                ],
                [
                    -3.886548131955924e-19,
                    -8.159909111168124e-19,
                    1.0
                ]
            ],
            "x1": 232,
            "x2": 279,
            "x3": 279,
            "x4": 232,
            "y1": 302,
            "y2": 299,
            "y3": 309,
            "y4": 312
        }
    ])


if __name__ == '__main__':
    app.debug = True  # enables auto reload during development
    app.run(host='0.0.0.0', port=5000)
